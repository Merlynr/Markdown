---
title: 2019-1-7 DOM元素动态监听 
tags: QD,js
grammar_cjkRuby: true
---
<font color="green">今天遇到一个一直认为很简单的问题，真正接手后才知道这么可怕</font>
*大体是这样的，默认动态加载的card应该是自动向下，当card遇到页面最下面应该自动向上渲染。*
![未](https://www.github.com/Merlynr/Markdown/raw/noteImg/小书匠/1546849657634.png)
![已](https://www.github.com/Merlynr/Markdown/raw/noteImg/小书匠/1546849682648.png)
动态生成的DOM都是根据id来监听获取元素的信息。
<font color='red'>坑1</font>：当时数据较少没有考虑到card渲染方向，所以在页面下面的时候card加载到了浏览器之外
<font color='yellow'>进坑1</font>：当我一开始碰到这个bug时，so easy！！！所以加了一个判断条件，在函数@mouseenter获取触发点位置，然后加上一个页面高度和页面高度**screen.height**进行对比，然后对card进行移位，蒽，easy！！！

``` let rect = this.$el.getBoundingClientRect()
```
![判断函数](https://www.github.com/Merlynr/Markdown/raw/noteImg/小书匠/1546850258301.png)
<font color='#2866bd'>so,坑</font>：很快，师傅过来啦，你这个写死啦，扩展性不好！内心毫无波澜，好，改成动态！


----------


<font color='red'>坑2</font>：动态嘛，嗯嗯，就是换成动态判断条件就行啦！
<font color='yellow'>进坑2</font>：Google一下，百度一天，怎么检查新生成的DOM元素是否超出可视页面！结果搜到一堆判断scroll滚动元素的边境溢出！根本没有智能的自动检查函数，我平时也看到过有的网站是可以实现自动判断，所以一定可以解决！证明只有程序袁才是万能的，代码，呵！
<font color='#2866bd'>so,坑</font>：表示师傅看不下去啦，“你根据ID，利用$nextTick**获得更新后的元素信息**来获取DOM的信息！”


----------






